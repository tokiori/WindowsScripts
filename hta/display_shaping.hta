<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <meta charset="utf-8" />
        <title>JSON整形</title>
        <HTA:APPLICATION ID="thishta" />
        <script src="../wsf.js"></script>
        <script>
            var shaping = function () {
                var $i = document.querySelector("#iData");
                var $o = document.querySelector("#oData");
                var shapingstr = $i.value;
                var shapingstr = js.json.sharping(shapingstr);
                $o.value = shapingstr;
            };
            var init = function () {
                var $i = document.querySelector("#iData");
                var sampleType = {
                    dateval: Date.now(),
                    strval: "string",
                    numval: 123,
                    floatval: 123.4567,
                    nullval: null,
                    undefinedval: undefined,
                    arrval: [1, 2, 3],
                };
                var sampleValue = {
                    colon: "[:,;]",
                    brank: "[ ,　]",
                    tab: "[\t,	]",
                    sq: "[','']",
                    dq: '[",""]',
                };
                var dummyObjStr = JSON.stringify([sampleValue]);
                var sampleEscape = [
                    "[<]:&lt;",
                    "[>]:&gt;",
                    "[']:&#39;",
                    '["]:&quot;',
                    "[&]:&amp;",
                    "[ ]:&nbsp;",
                    "[¥]:&yen;",
                    "[©]:&copy;",
                    "[®]:&reg;",
                ];
                var testJson = {
                    description: "json string sample.",
                    sampleType: sampleType,
                    sampleValue: sampleValue,
                    dummyObjStr: dummyObjStr,
                    sampleEscape: sampleEscape,
                };
                var jsonstr = JSON.stringify(testJson);
                $i.value = jsonstr;
            };
        </script>
        <style>
            textarea {
                width: 100%;
            }
        </style>
    </head>
    <body onLoad="init()">
        <div id="contents_area">
            <p>整形前</p>
            <textarea id="iData" style="margin-bottom: 1em; height: 10em"></textarea><br />
            <input type="button" value="JSON整形" onClick="shaping()" /><br />
            <p>整形後</p>
            <textarea id="oData" style="height: 30em"></textarea><br />
        </div>
    </body>
</html>
