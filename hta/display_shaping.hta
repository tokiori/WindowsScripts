<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <meta charset="utf-8" />
        <title>JSON整形</title>
        <HTA:APPLICATION ID="thishta" />
        <script src="../wsf.js"></script>
        <script>
            var shaping = function () {
                var $i = document.querySelector("#iData");
                var $o = document.querySelector("#oData");
                var shapingstr = $i.value;
                var shapingstr = js.json.sharping(shapingstr);
                $o.value = shapingstr;
            };
            var init = function () {
                var $i = document.querySelector("#iData");
                var valueNow = '"now":"' + Date.now() + '"';
                var valueObj = '{"hasColon":"has:colon:::", "hasBrank":"  has brank  .  "}';
                var valueArray = '"array":[{"bbb":222, "ccc":"{test}"}, null]';
                var valueTrust = '"trust":' + valueObj;
                var valueDummy = '"dummy":"' + valueObj.replace(/(\")/g, '\\"') + '"';
                var valueObjTest = '"object":{' + valueTrust + ", " + valueDummy + "}";
                $i.value = "{" + valueNow + ', "aaa":"111", ' + valueArray + ", " + valueObjTest + "}";
            };
        </script>
        <style></style>
    </head>
    <body onLoad="init()">
        <div id="contents_area">
            <p>整形前</p>
            <textarea id="iData" style="width: 100%; margin-bottom: 1em; height: 10em"></textarea><br />
            <input type="button" value="JSON整形" onClick="shaping()" /><br />
            <p>整形後</p>
            <textarea id="oData" style="width: 100%; height: 30em"></textarea><br />
        </div>
    </body>
</html>
